---
title: Timeout and Retries
description: Configure automatic retries and request timeouts
---

## Retries

Configure automatic retries for failed requests with flexible retry strategies.

### Basic Usage

```ts title="api.ts"
const client = createFetchClient({
	// Retry up to 3 times
	retryAttempts: 3,

	// Wait 1 second between retries
	retryDelay: 1000,

	// Use exponential backoff
	retryStrategy: "exponential",
});
```

### Retry Options

- `retryAttempts`: Maximum number of retry attempts (default: 0)
- `retryDelay`: Delay between retries in milliseconds (default: 1000)
- `retryMaxDelay`: Maximum delay for exponential backoff (default: 30000)
- `retryStrategy`: `"linear"` or `"exponential"` (default: "linear")
- `retryCodes`: HTTP status codes to retry (default: [409, 425, 429, 500, 502, 503, 504])
- `retryMethods`: HTTP methods to retry (default: ["GET"])
- `retryCondition`: Custom function to determine if a retry should be attempted

### Retry Strategies

#### Linear Strategy

Waits a fixed amount of time between retries:

```ts
const client = createFetchClient({
	retryAttempts: 3,
	retryDelay: 1000, // Wait 1 second
	retryStrategy: "linear",
});
```

#### Exponential Strategy

Increases the delay between retries exponentially:

```ts
const client = createFetchClient({
	retryAttempts: 3,
	retryDelay: 1000, // Initial delay
	retryMaxDelay: 10000, // Maximum delay
	retryStrategy: "exponential",
});

// Retry delays: 1s -> 2s -> 4s
```

##@

### Custom Retry Conditions

Use `retryCondition` to implement custom retry logic:

```ts
const client = createFetchClient({
	retryAttempts: 3,
	retryCondition: async ({ error, response }) => {
		// Only retry rate limit errors
		return response?.status === 429;
	},
});
```

### Retry Events

Listen to retry attempts using the `onRetry` hook:

```ts
const client = createFetchClient({
	retryAttempts: 3,
	onRetry: ({ error, options }) => {
		console.log(`Retrying request (attempt ${options.retryCount} of ${options.retryAttempts})`);
	},
});
```

## Timeouts

Set request timeouts to prevent long-running requests:

```ts title="api.ts"
// Timeout after 60 milliseconds
const { data } = await createFetchClient("/users", {
	timeout: 60000,
});
```

### Handling Timeouts

Timeout errors can be caught and handled like any other error:

```ts
try {
	const { data } = await callApi("/users", {
		signal: createTimeoutSignal(5000),
	});
} catch (error) {
	if (error.name === "TimeoutError") {
		console.error("Request timed out");
	}
}
```
